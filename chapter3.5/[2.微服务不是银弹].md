# 微服务不是银弹

对于微服务而言，如之前所描述的，其某些优势是非常明显的：

- 服务高内聚、低耦合，只关注于一个业务功能；
- 围绕业务组织团队，并且服务由全功能团队独立开发；
- 通过轻量级的通信机制，团队更聚焦于使用合适的语言、工具来解决业务问题；
- 业务数据分离，利于维护和迁移；
- 技术方案的多样性以及基础设施自动化，有效构建了演进式的架构设计

这些优势使得微服务看起来像一个完美的解决方案。


但是，微服务也并不是传说中的银弹呢，在微服务的实施过程中，也存在着很多的挑战：

- 运维成本过高（配置、部署、监控、日志等）
	* 配置管理变的越来复杂
	* 服务监控变得越来越重要
	* 部署成本

- 自动化部署流水线

- 分布式系统的复杂度
	* 错误处理（网络、带宽等对服务间通信的影响）
	* 分布式事务管理
		* 数据总保持一致性
		* 系统可用性降低
		* 技术实现成本高
	* 通信机制的选择
		* 同步的HTTP实现
			- 简单
			- 不支持发布、订阅模式
			- client、server必须要同时在线
			- client需要知道主机的地址和端口
		* 异步
			- client不会阻塞
			- client、server不需要同时在线
	最终一致性
		* 服务解耦
		* 技术实现成本低

- 测试复杂度增加

- DevOPS文化的理解

- 服务间的依赖管理


----------------------------------------

- 系统复杂度
  随着微服务数量的增加，开发人员无法构建复杂的上下文，也无法构建对系统整体的认识。
  需要更好的企业集成模式

- 性能
  由于是跨进程、跨网络的调用，每跳(hop)的平均时间是20~200ms
----------------------------------------

微服务的前置条件
  - 高可用性和错误容忍性
  - 动态服务管理
  - 错误原因分析（日志聚合、监控）
  - 数据冗余实现最终一致性
  - 轻量级通信机制
  - 用户接口集成
  - 业务逻辑解耦

DevOPS
1.在分布式系统中实现高可用的方式
  - 数据冗余
  - 故障切换
  传统的服务方式：
  	- 主动-主动方式
  	- 主动-被动方式
  	- 
  微服务方式：
  	- 动态节点启动
  	- 平滑降级

2. 灾备策略
	- 负载均衡（路由到可用的节点）
	- 健康信息监控
	- Circuit breakers

	基础设施
    	- 智能路由
    	- 消息/队列
    	- 自动化脚本管理（重启服务等）
    	- PAAS服务管理/

